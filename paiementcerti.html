<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID Card to PDF</title>
    <link href="img/logo_of_wallet.jpg" rel="icon">
    <link rel="stylesheet" href="pdf.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        crossorigin="anonymous">
    <style>
        /* Ajoutez votre CSS ici */
        .id-card-holder {
            width: 300px;
            border: 1px solid #566875;
            padding: 10px;
            text-align: center;
        }

        .header img,
        .photo img {
            max-width: 100%;
            height: auto;
        }

        .id-card {
            margin: 10px 0;
        }
    </style>
</head>

<body style="background-color: #2c3338 !important;">
    <div class="id-card-tag"></div>
    <div class="id-card-tag-strip"></div>
    <div class="id-card-hook"></div>
    <div class="id-card-holder" style="background-color: #2c3338 !important;">
        <div class="id-card" id="idCard" style="background-color: #f0f4f8 !important;">
            <div class="photo">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="blue"
                    class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                    <path
                        d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708" />
                </svg>
            </div>
            <p id="Studentx" style="font-size: 18px;"></p>
            <p id="Student" style="font-size: 18px;"></p>
            <p id="Prabsaran" style="font-size: 18px;"></p>
            <p id="phoneMyId" style="font-size: 18px;"></p>
            <p id="paysMyId" style="font-size: 18px;"></p>

            <button class="btn btn-primary">Certificat </button>

            <hr>
            <p><strong>am-walette</strong> Neemrana, NH-8 Delhi-Jaipur highway
            <p>
            <p>District Alwar, Rajasthan <strong>301705</strong></p>
            <p>Ph: 01494-660600, 7073222393</p>
        </div>
        <button id="downloadx" class="btn btn-danger">Retour</button> <button id="download"
            class="btn btn-primary">Download PDF</button>
    </div>
    <script>
        const DateNow = localStorage.getItem('DateNow')
        const MyCommissionAdd = localStorage.getItem('MyCommissionAdd')
        const usernameT = localStorage.getItem('usernameT')
        const phoneT = localStorage.getItem('lenumero')
        const selectedCodeT = localStorage.getItem('tableNomPaysL')
        const reasonT = localStorage.getItem('reason')
        document.getElementById('Prabsaran').innerHTML = ` <strong>Date</strong> : ${DateNow} `
        document.getElementById('paysMyId').innerHTML = ` <strong>Phone</strong> : ${phoneT} `
        document.getElementById('phoneMyId').innerHTML = ` <strong>Pays</strong> : ${selectedCodeT} `
        document.getElementById('Prabsaran').innerHTML += ` <strong>Raison</strong> : ${reasonT} `
        document.getElementById('Student').innerHTML = ` <strong>Montant retiré</strong> : ${MyCommissionAdd} $`
        document.getElementById('Studentx').innerHTML = ` <strong>Nom</strong> : ${usernameT}`
        if (MyCommissionAdd) {
            document.getElementById('download').addEventListener('click', () => {
                const element = document.getElementById('idCard');
                const options = {
                    margin: 0.5,
                    filename: 'Paiement_Card.pdf',
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true },
                    jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
                };

                html2pdf().set(options).from(element).save()
                    .then(() => {
                        localStorage.removeItem('DateNow')
                        localStorage.removeItem('MyCommissionAdd')
                        localStorage.removeItem('phone')
                        localStorage.removeItem('selectedCode')
                        setTimeout(() => {
                            window.location.reload();
                        }, 500)
                    })
                    .catch((error) => {
                        // Code à exécuter en cas d'erreur
                        console.error('Erreur lors du téléchargement du PDF:', error);
                        alert('Une erreur est survenue lors du téléchargement du PDF.');
                    });
            });
        } else {
            window.location.href = "index.html";
        }
        document.getElementById('downloadx').addEventListener('click', () => {
            window.location.href = "index.html";
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        crossorigin="anonymous"></script>
</body>

</html>